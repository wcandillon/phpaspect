<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>Chapter 5. Joinpoints</title><link rel="stylesheet" href="docbook.css" type="text/css"></link><meta name="generator" content="DocBook XSL Stylesheets V1.71.0"></meta><link rel="start" href="index.html" title="phpAspect documentation"></link><link rel="up" href="index.html" title="phpAspect documentation"></link><link rel="prev" href="aspects.html" title="Chapter 4. Writing Aspects"></link><link rel="next" href="pointcuts.html" title="Chapter 6. Poincuts"></link><script xmlns="" src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script xmlns="" type="text/javascript">
    _uacct = "UA-259974-1";
    urchinTracker();
    </script></head><body><a xmlns="" href="http://phpaspect.org"><img src="http://phpaspect.org/images/phpaspect.png" alt="phpAspect Logo" style="border:0;"></a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 5. Joinpoints</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="aspects.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="pointcuts.html">Next</a></td></tr></table><hr></hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="joinpoints"></a>Chapter 5. Joinpoints</h2></div></div></div><div class="section" lang="en"><div class="titlepage"></div><p>
        The current implementation of phpAspect counts
        3 kinded joinpoints, a lot more will come very soon:
        </p><div class="itemizedlist"><ul type="disc"><li>Method execution</li><li>Method call</li><li>Object construction</li></ul></div><p>
        </p><p>
        There is also 3 non-kinded joinpoints:
        </p><div class="itemizedlist"><ul type="disc"><li>File</li><li>Within</li><li>This</li></ul></div><p>
        </p><p>
        Kinded joinpoints match a specific type of joinpoint 
        using a signature and non-kinded joinpoints match all type 
        of joinpoints using variety of properties. 
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="joinpoints.exec"></a>Method execution joinpoint</h2></div></div></div><p>
        The method execution joinpoint identifies certains method executions
        in the program call graph.
        The signature of this joinpoint is the following:
        </p><strong class="userinput"><code>exec(<em class="replaceable"><code>method_modifiers</code></em>  <em class="replaceable"><code>ClassName</code></em>::<em class="replaceable"><code>MethodName</code></em>(<em class="replaceable"><code>ParametersNumber</code></em>))</code></strong><div class="example"><a id="exec-joinpoint.php"></a><p class="title"><b>Example 5.1: Exemples of the method execution joinpoint.</b></p><div class="example-contents"><pre class="programlisting"><code><span class="default">&lt;?php</span><br /><span class="default">aspect</span><span class="default">&nbsp;</span><span class="default">BankTransfer</span><span class="keyword">{</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">/*Identify&nbsp;all&nbsp;the&nbsp;execution&nbsp;of&nbsp;the&nbsp;public&nbsp;withdraw&nbsp;method</span><br /><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;Account&nbsp;class&nbsp;taking&nbsp;one&nbsp;parameter.*/</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">poincut</span><span class="default">&nbsp;</span><span class="default">withdraw</span><span class="keyword">:</span><span class="default">exec</span><span class="keyword">(</span><span class="keyword">public</span><span class="default">&nbsp;</span><span class="default">Account</span><span class="keyword">::</span><span class="default">withdraw</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">/*Identify&nbsp;all&nbsp;the&nbsp;execution&nbsp;of&nbsp;the&nbsp;public&nbsp;deposit&nbsp;method</span><br /><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;Account&nbsp;class&nbsp;taking&nbsp;one&nbsp;parameter.*/</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">poincut</span><span class="default">&nbsp;</span><span class="default">deposit</span><span class="keyword">:</span><span class="default">exec</span><span class="keyword">(</span><span class="keyword">public</span><span class="default">&nbsp;</span><span class="default">Account</span><span class="keyword">::</span><span class="default">deposit</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span><br /><span class="keyword">}</span><br /><span class="default">?&gt;</span><br /></code></pre></div></div><br class="example-break"></br></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="joinpoints.call"></a>Method call joinpoint</h2></div></div></div><p>
            The method execution joinpoint identifies certains method calls
            in the program call graph.
            The difference with the method execution joinpoint is the context:
            this joinpoint access the calling context and doesn't see the execution
            context.
            The signature of this joinpoint is the following:
        </p><strong class="userinput"><code>call( <em class="replaceable"><code>ClassName</code></em>-&gt;<em class="replaceable"><code>MethodName</code></em>(<em class="replaceable"><code>ParametersNumber</code></em>))</code></strong><div class="example"><a id="call-joinpoint.php"></a><p class="title"><b>Example 5.2: Exemples of the method call joinpoint.</b></p><div class="example-contents"><pre class="programlisting"><code><span class="default">&lt;?php</span><br /><span class="default">aspect</span><span class="default">&nbsp;</span><span class="default">Chekchout</span><span class="keyword">{</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">/*Identify&nbsp;all&nbsp;the&nbsp;call&nbsp;of&nbsp;the&nbsp;addItem&nbsp;method</span><br /><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;Cart&nbsp;class&nbsp;taking&nbsp;two&nbsp;parameters.*/</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">poincut</span><span class="default">&nbsp;</span><span class="default">addItem</span><span class="keyword">:</span><span class="default">call</span><span class="keyword">(</span><span class="default">Cart</span><span class="keyword">-&gt;</span><span class="default">AddItem</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">/*Identify&nbsp;all&nbsp;the&nbsp;call&nbsp;of&nbsp;the&nbsp;checkout&nbsp;method</span><br /><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;Cart&nbsp;class&nbsp;with&nbsp;any&nbsp;parameters.*/</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">poincut</span><span class="default">&nbsp;</span><span class="default">checkout</span><span class="keyword">:</span><span class="default">call</span><span class="keyword">(</span><span class="default">Cart</span><span class="keyword">-&gt;</span><span class="default">checkout</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span><br /><span class="keyword">}</span><br /><span class="default">?&gt;</span><br /></code></pre></div></div><br class="example-break"></br></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="joinpoints.new"></a>Construction joinpoint</h2></div></div></div><p>
        The construction joinpoint identifies object constructions
        the program call graph.
        The signature of this joinpoint is the following:
        </p><strong class="userinput"><code>new(<em class="replaceable"><code>ClassName</code></em>(<em class="replaceable"><code>ParametersNumber</code></em>))</code></strong><div class="example"><a id="new-joinpoint.php"></a><p class="title"><b>Example 5.3: Exemples of the construction joinpoint.</b></p><div class="example-contents"><pre class="programlisting"><code><span class="default">&lt;?php</span><br /><span class="default">aspect</span><span class="default">&nbsp;</span><span class="default">Singleton</span><span class="keyword">{</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">/*Identify&nbsp;all&nbsp;the&nbsp;construction&nbsp;of&nbsp;Foo&nbsp;objects&nbsp;with&nbsp;any&nbsp;parameters.*/</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">poincut</span><span class="default">&nbsp;</span><span class="default">newFoo</span><span class="keyword">:</span><span class="keyword">new</span><span class="keyword">(</span><span class="default">Foo</span><span class="keyword">(</span><span class="keyword">*</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">/*Identify&nbsp;all&nbsp;the&nbsp;construction&nbsp;of&nbsp;Bar&nbsp;objects&nbsp;with&nbsp;any&nbsp;parameters.*/</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">poincut</span><span class="default">&nbsp;</span><span class="default">newBar</span><span class="keyword">:</span><span class="keyword">new</span><span class="keyword">(</span><span class="default">Bar</span><span class="keyword">(</span><span class="keyword">*</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span><br /><span class="keyword">}</span><br /><span class="default">?&gt;</span><br /></code></pre></div></div><br class="example-break"></br></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="joinpoints.file"></a>File joinpoint</h2></div></div></div><p>
            This joinpoint is a predicate on the filename where
            kinded joinpoints can be matched.
            The signature of this joinpoint is the following:
        </p><strong class="userinput"><code>file(<em class="replaceable"><code>ClassName</code></em>)</code></strong><div class="example"><a id="file-joinpoint.php"></a><p class="title"><b>Example 5.4: Exemples of the file joinpoint.</b></p><div class="example-contents"><pre class="programlisting"><code><span class="default">&lt;?php</span><br /><span class="default">aspect</span><span class="default">&nbsp;</span><span class="default">Context</span><span class="keyword">{</span><br /><span class="default">&nbsp;&nbsp;&nbsp;</span><span class="comment">//Match&nbsp;all&nbsp;the&nbsp;foo()&nbsp;calls&nbsp;in&nbsp;the&nbsp;Bar.php&nbsp;filename</span><br /><span class="default">&nbsp;&nbsp;&nbsp;</span><span class="default">pointcut</span><span class="default">&nbsp;</span><span class="default">fooInBar</span><span class="keyword">:</span><span class="default">call</span><span class="keyword">(</span><span class="keyword">*</span><span class="keyword">-&gt;</span><span class="default">bar</span><span class="keyword">(</span><span class="keyword">*</span><span class="keyword">)</span><span class="keyword">)</span><span class="default">&nbsp;</span><span class="keyword">&amp;&amp;</span><span class="default">&nbsp;</span><span class="default">file</span><span class="keyword">(</span><span class="string">'Bar.php'</span><span class="keyword">)</span><span class="keyword">;</span><br /><span class="keyword">}</span><br /><span class="default">?&gt;</span><br /></code></pre></div></div><br class="example-break"></br></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="joinpoints.within"></a>Within joinpoint</h2></div></div></div><p>
            This joinpoint is a predicate on the class where
            kinded joinpoints can be matched.
            The signature of this joinpoint is the following:
        </p><strong class="userinput"><code>within(<em class="replaceable"><code>ClassName</code></em>)</code></strong><div class="example"><a id="with-joinpoint.php"></a><p class="title"><b>Example 5.5: Exemples of the within joinpoint.</b></p><div class="example-contents"><pre class="programlisting"><code><span class="default">&lt;?php</span><br /><span class="default">aspect</span><span class="default">&nbsp;</span><span class="default">Context</span><span class="keyword">{</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//Match&nbsp;all&nbsp;the&nbsp;foo()&nbsp;calls&nbsp;in&nbsp;the&nbsp;Bar&nbsp;class.</span><br /><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">pointcut</span><span class="default">&nbsp;</span><span class="default">fooInBar</span><span class="keyword">:</span><span class="default">call</span><span class="keyword">(</span><span class="keyword">*</span><span class="keyword">-&gt;</span><span class="default">bar</span><span class="keyword">(</span><span class="keyword">*</span><span class="keyword">)</span><span class="keyword">)</span><span class="default">&nbsp;</span><span class="keyword">&amp;&amp;</span><span class="default">&nbsp;</span><span class="default">within</span><span class="keyword">(</span><span class="default">Bar</span><span class="keyword">)</span><span class="keyword">;</span><br /><span class="keyword">}</span><br /><span class="default">?&gt;</span><br /></code></pre></div></div><br class="example-break"></br></div></div><div class="navfooter"><hr></hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="aspects.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="pointcuts.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 4. Writing Aspects </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 6. Poincuts</td></tr></table></div><div xmlns="" class="copyright-notice"><a href="appendixes.copyright.html">Copyright</a> © 2006-2007 <a href="mailto:wcandillon@elv.telecom-lille1.eu">William Candillon</a>
      and <a href="mailto:vanwormhoudt@telecom-lille1.eu">Gilles Vanwormhoudt</a>.
    </div></body></html>
